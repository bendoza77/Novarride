import{r as n,C as T,U as q,j as e,L as E}from"./index-CwyD509L.js";import{C as b}from"./Car-BGwvaoqc.js";import{l as w}from"./left-arrow-removebg-preview-BIDEBOXS.js";import{r as L}from"./arrow-removebg-preview (1)-foiFhb3n.js";import{b as F}from"./pexels-thephotosaccount-30664842-BXdFSZXa.js";const $=()=>{const[l,k]=n.useState([]),{filter:p,setFilter:C}=n.useContext(T),[f,N]=n.useState(""),{curUser:j}=n.useContext(q),[t,h]=n.useState(1),i=(t-1)*6,g="https://novarride.onrender.com/api",A=async r=>{r.preventDefault();const{title:s,carType:c,passenger:o,transmission:d,carAge:u,luggage:a,airCondition:x,pricePerDay:m}=r.target,_={title:s.value,carType:c.value,passenger:o.value,transmission:d.value,carAge:u.value,luggage:a.value,airCondition:x.value,pircePerDay:m.value};try{const v=await(await fetch(`${g}/cars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).json();console.log(v),N(v)}catch(y){console.log(y)}},S=r=>{r.preventDefault();const{carName:s,carType:c}=r.target,o=Array.from(c).filter(a=>a.checked).map(a=>a.value),d=s.value.toLocaleLowerCase().trim(),u=l.filter(a=>{const x=d===""||`${a.title}`.toLocaleLowerCase().trim().startsWith(d),m=o.length===0||o.includes(a.type);return x&&m});C(u)};return n.useEffect(()=>{(async()=>{try{const c=await(await fetch(`${g}/cars`)).json();k(c)}catch(s){console.log(s)}})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"cars_div",children:[e.jsxs("div",{style:{backgroundImage:`url(${F})`},className:"about_top",children:[e.jsx("h1",{children:"Cars"}),e.jsxs("div",{className:"about_nav",children:[e.jsx(E,{to:"/",children:e.jsx("p",{className:"about_home",children:"Home"})}),e.jsx("p",{children:"/"}),e.jsx("p",{className:"place",children:"Cars"})]})]}),e.jsxs("div",{className:"collection",children:[e.jsxs("div",{className:"col_left",children:[e.jsxs("form",{onSubmit:S,children:[e.jsx("input",{type:"text",name:"carName",id:"search",placeholder:"Search..."}),e.jsxs("div",{className:"types_div",children:[e.jsx("h1",{style:{marginTop:"50px"},children:"Car Types"}),e.jsxs("div",{className:"cheks",children:[e.jsx("label",{htmlFor:"chek1",children:e.jsxs("div",{className:"chek",children:[e.jsx("input",{type:"checkbox",value:"Sedan",name:"carType",id:"chek1"}),e.jsx("p",{children:"Sedan Car"})]})}),e.jsx("label",{htmlFor:"chek2",children:e.jsxs("div",{className:"chek",children:[e.jsx("input",{value:"Hatchback",type:"checkbox",name:"carType",id:"chek2"}),e.jsx("p",{children:"Hatchback Car"})]})}),e.jsx("label",{htmlFor:"chek3",children:e.jsxs("div",{className:"chek",children:[e.jsx("input",{value:"SUV",type:"checkbox",name:"carType",id:"chek3"}),e.jsx("p",{children:"SUV Car"})]})})]})]}),e.jsx("button",{children:"Search"})]}),e.jsxs("form",{style:{display:["moderator","admin"].includes(j.role)?"block":"none"},onSubmit:A,className:"add_car",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"title",placeholder:"Enter car title",required:!0})}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"carType",placeholder:"Enter car type",required:!0})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"passenger",placeholder:"Enter number of passengers",required:!0})}),e.jsx("div",{children:e.jsxs("select",{name:"transmission",required:!0,children:[e.jsx("option",{value:"",children:"Select transmission"}),e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"automatic",children:"Automatic"})]})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"carAge",placeholder:"Enter car age in years",required:!0})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"luggage",placeholder:"Enter luggage capacity",required:!0})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"airCondition",id:"air"}),"Air Conditioning"]})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"pricePerDay",placeholder:"Enter price per day",required:!0})}),e.jsx("button",{style:{display:["moderator","admin"].includes(j.role)?"block":"none",marginTop:"20px"},children:"Add Car"})]}),e.jsx("p",{style:{color:"red",marginTop:"20px",lineHeight:"25px"},children:f.message})]}),e.jsxs("div",{className:"col_right",children:[e.jsx("div",{style:{display:"grid"},className:"page_one",children:p.length!==0?p.slice(i,i+6).map(r=>e.jsx(b,{car:r},r._id)):l.slice(i,i+6).map(r=>e.jsx(b,{car:r},r._id))}),e.jsxs("div",{style:{display:[1,2,3,4,5,6].includes(p.length)?"none":"flex"},className:"col_button",children:[e.jsx("button",{style:{display:t===1?"none":"block",padding:"2px",backgroundColor:"rgb(255, 45, 45)"},onClick:()=>h(t-1),children:e.jsx("img",{src:w,alt:""})}),e.jsx("div",{style:{display:"flex",aligneItems:"center",gap:"10px"},children:Array.from({length:Math.ceil(l.length/6)},(r,s)=>e.jsx("button",{onClick:()=>h(s+1),style:{fontWeight:t===s+1?"bold":"normal",backgroundColor:t===s+1?"black":"rgb(255, 45, 45)"},children:s+1},s))}),e.jsx("button",{style:{display:t===Math.ceil(l.length/6)?"none":"block",padding:"2px",backgroundColor:"rgb(255, 45, 45)"},onClick:()=>h(t+1),children:e.jsx("img",{src:L,alt:""})})]})]})]})]})})};export{$ as default};
