import{r as n,C as T,U as _,j as e,L as q}from"./index-BDlMBCgX.js";import{C as v}from"./Car-lDiIC4cO.js";import{l as E}from"./left-arrow-removebg-preview-BIDEBOXS.js";import{r as w}from"./arrow-removebg-preview (1)-foiFhb3n.js";const U=()=>{const[l,b]=n.useState([]),{filter:h,setFilter:C}=n.useContext(T),[k,f]=n.useState(""),{curUser:j}=n.useContext(_),[t,p]=n.useState(1),i=(t-1)*6,N=async r=>{r.preventDefault();const{title:a,carType:c,passenger:o,transmission:d,carAge:u,luggage:s,airCondition:x,pricePerDay:m}=r.target,S={title:a.value,carType:c.value,passenger:o.value,transmission:d.value,carAge:u.value,luggage:s.value,airCondition:x.value,pircePerDay:m.value};try{const y=await(await fetch("http://localhost:3000/api/cars",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).json();console.log(y),f(y)}catch(g){console.log(g)}},A=r=>{r.preventDefault();const{carName:a,carType:c}=r.target,o=Array.from(c).filter(s=>s.checked).map(s=>s.value),d=a.value.toLocaleLowerCase().trim(),u=l.filter(s=>{const x=d===""||`${s.title}`.toLocaleLowerCase().trim().startsWith(d),m=o.length===0||o.includes(s.type);return x&&m});C(u)};return n.useEffect(()=>{(async()=>{try{const c=await(await fetch("http://localhost:3000/api/cars")).json();b(c)}catch(a){console.log(a)}})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"cars_div",children:[e.jsxs("div",{className:"about_top",children:[e.jsx("h1",{children:"Cars"}),e.jsxs("div",{className:"about_nav",children:[e.jsx(q,{to:"/",children:e.jsx("p",{className:"about_home",children:"Home"})}),e.jsx("p",{children:"/"}),e.jsx("p",{className:"place",children:"Cars"})]})]}),e.jsxs("div",{className:"collection",children:[e.jsxs("div",{className:"col_left",children:[e.jsxs("form",{onSubmit:A,children:[e.jsx("input",{type:"text",name:"carName",id:"search",placeholder:"Search..."}),e.jsxs("div",{className:"types_div",children:[e.jsx("h1",{style:{marginTop:"50px"},children:"Car Types"}),e.jsxs("div",{className:"cheks",children:[e.jsx("label",{htmlFor:"chek1",children:e.jsxs("div",{className:"chek",children:[e.jsx("input",{type:"checkbox",value:"Sedan",name:"carType",id:"chek1"}),e.jsx("p",{children:"Sedan Car"})]})}),e.jsx("label",{htmlFor:"chek2",children:e.jsxs("div",{className:"chek",children:[e.jsx("input",{value:"Hatchback",type:"checkbox",name:"carType",id:"chek2"}),e.jsx("p",{children:"Hatchback Car"})]})}),e.jsx("label",{htmlFor:"chek3",children:e.jsxs("div",{className:"chek",children:[e.jsx("input",{value:"SUV",type:"checkbox",name:"carType",id:"chek3"}),e.jsx("p",{children:"SUV Car"})]})})]})]}),e.jsx("button",{children:"Search"})]}),e.jsxs("form",{style:{display:["moderator","admin"].includes(j.role)?"block":"none"},onSubmit:N,className:"add_car",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"title",placeholder:"Enter car title",required:!0})}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"carType",placeholder:"Enter car type",required:!0})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"passenger",placeholder:"Enter number of passengers",required:!0})}),e.jsx("div",{children:e.jsxs("select",{name:"transmission",required:!0,children:[e.jsx("option",{value:"",children:"Select transmission"}),e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"automatic",children:"Automatic"})]})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"carAge",placeholder:"Enter car age in years",required:!0})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"luggage",placeholder:"Enter luggage capacity",required:!0})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"airCondition",id:"air"}),"Air Conditioning"]})}),e.jsx("div",{children:e.jsx("input",{type:"number",name:"pricePerDay",placeholder:"Enter price per day",required:!0})}),e.jsx("button",{style:{display:["moderator","admin"].includes(j.role)?"block":"none",marginTop:"20px"},children:"Add Car"})]}),e.jsx("p",{style:{color:"red",marginTop:"20px",lineHeight:"25px"},children:k.message})]}),e.jsxs("div",{className:"col_right",children:[e.jsx("div",{style:{display:"grid"},className:"page_one",children:h.length!==0?h.slice(i,i+6).map(r=>e.jsx(v,{car:r},r._id)):l.slice(i,i+6).map(r=>e.jsx(v,{car:r},r._id))}),e.jsxs("div",{style:{display:[1,2,3,4,5,6].includes(h.length)?"none":"flex"},className:"col_button",children:[e.jsx("button",{style:{display:t===1?"none":"block",padding:"2px",backgroundColor:"rgb(255, 45, 45)"},onClick:()=>p(t-1),children:e.jsx("img",{src:E,alt:""})}),e.jsx("div",{style:{display:"flex",aligneItems:"center",gap:"10px"},children:Array.from({length:Math.ceil(l.length/6)},(r,a)=>e.jsx("button",{onClick:()=>p(a+1),style:{fontWeight:t===a+1?"bold":"normal",backgroundColor:t===a+1?"black":"rgb(255, 45, 45)"},children:a+1},a))}),e.jsx("button",{style:{display:t===Math.ceil(l.length/6)?"none":"block",padding:"2px",backgroundColor:"rgb(255, 45, 45)"},onClick:()=>p(t+1),children:e.jsx("img",{src:w,alt:""})})]})]})]})]})})};export{U as default};
